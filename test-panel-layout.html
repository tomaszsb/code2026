<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Layout Test</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        .test-container { padding: 20px; }
        .test-game-state { background: #f0f0f0; padding: 10px; margin-bottom: 20px; }
        .test-panel { background: #e0e0e0; padding: 10px; margin: 5px; min-height: 100px; }
    </style>
    
    <!-- CSS Framework -->
    <link rel="stylesheet" href="css/unified-design.css">
    <link rel="stylesheet" href="css/panel-layout.css">
</head>
<body>
    <div id="test-app"></div>

    <!-- React via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // Mock game state for testing
        const mockGameState = {
            gamePhase: 'PLAYING',
            currentPlayer: 0,
            players: [
                {
                    id: 1,
                    name: 'Test Player',
                    color: '#4CAF50',
                    position: 'TEST-SPACE',
                    cards: [
                        { card_type: 'W', card_name: 'Test Work Card' },
                        { card_type: 'B', card_name: 'Test Bank Card' }
                    ],
                    money: 100000,
                    time: 50,
                    scope: 25
                }
            ]
        };

        // Mock GameStateManager
        window.GameStateManager = {
            getState: () => mockGameState,
            on: (event, callback) => () => {},
            emit: (event, data) => console.log('Event:', event, data),
            handleError: (error) => console.error('Game Error:', error)
        };

        // Mock CSVDatabase
        window.CSVDatabase = {
            spaces: {
                find: (spaceName, visitType) => ({
                    space_name: spaceName,
                    phase: 'TEST',
                    Event: 'Test event description',
                    Action: 'Test action',
                    Time: '5'
                }),
                data: []
            }
        };

        // Mock ComponentUtils
        window.ComponentUtils = {
            getNextSpaces: (spaceData) => ['NEXT-SPACE-1', 'NEXT-SPACE-2', 'NEXT-SPACE-3']
        };

        // Simple test components
        function TestGameBoard() {
            return React.createElement('div', {
                className: 'test-panel',
                style: { background: '#c8e6c9', height: '300px' }
            }, 'Game Board Area - Working!');
        }

        function TestPlayerStatusPanel() {
            return React.createElement('div', {
                className: 'test-panel',
                style: { background: '#ffcdd2' }
            }, 'Player Status Panel - Working!');
        }

        function TestActionPanel() {
            return React.createElement('div', {
                className: 'test-panel',
                style: { background: '#fff3e0' }
            }, 'Action Panel - Working!');
        }

        function TestResultsPanel() {
            return React.createElement('div', {
                className: 'test-panel',
                style: { background: '#e1f5fe' }
            }, 'Results Panel - Working!');
        }

        // Set up mocks
        window.GameBoard = TestGameBoard;
        window.PlayerStatusPanel = TestPlayerStatusPanel;
        window.ActionPanel = TestActionPanel;
        window.ResultsPanel = TestResultsPanel;
    </script>

    <!-- Load the actual components -->
    <script src="js/utils/ComponentUtils.js"></script>
    <script type="text/babel" src="js/components/GamePanelLayout.js"></script>

    <script type="text/babel">
        function TestApp() {
            const [gameState] = window.ComponentUtils.useGameState();
            
            return React.createElement('div', { className: 'test-container' }, [
                React.createElement('div', {
                    key: 'info',
                    className: 'test-game-state'
                }, [
                    React.createElement('h2', {key: 'title'}, 'Panel Layout Test'),
                    React.createElement('p', {key: 'phase'}, `Game Phase: ${gameState.gamePhase}`),
                    React.createElement('p', {key: 'players'}, `Players: ${gameState.players.length}`)
                ]),
                
                React.createElement(window.GamePanelLayout, {
                    key: 'panel-layout'
                })
            ]);
        }

        // Render test
        const { createRoot } = ReactDOM;
        const root = createRoot(document.getElementById('test-app'));
        root.render(React.createElement(TestApp));
    </script>
</body>
</html>